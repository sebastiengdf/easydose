<!-- select_protocole.html.twig -->
<!-- Modal: modalQuickView -->
<div class="modal fade" id="listeprotooptim" tabindex="-1" role="dialog" aria-labelledby="listeprotooptim"
  aria-hidden="true">
  <div class="modal-dialog  modal-sm" role="document">
    <div class="modal-content">
    
      <div class="modal-header">
        <h5 class="modal-title" id="newoptimisationLabel">Choix du protocole</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      
      <form class="text-center border border-light " action="#!">
      <div class="modal-body">
          <div class="row">
              <div  class="col-lg-12 mb-2"  style="height: 3rem;">
                  {% include ("@EasyDose/portlet/optimdosimetrique/helper/liste_des_type_examens.html.twig") %} 
              </div>
          </div>
          
          
          <div class="row">
              <div id="listeproto" class="col-lg-12"  style="height: 2rem;">
                <select  class="browser-default custom-select mb-4">                        
                 <option value="" disabled>Choisir Type examens</option>
            	</select>
              </div>
              
          </div>
      </div>
      
      <hr class="w-100 mb-0">
      <div class="modal-footer">
        <button class="btn btn-info  btn-block" type="button" onclick="chooseProtoAndClose();" >
              					Sélectionner
        </button>
      </div>
      
      
      </form>
      
   </div>
  </div>
</div>

<script>


$('#fonctiondeclarantesr').change(function(){	
	var type = $(this).children("option:selected").val();
	loadproto('{{url('showListTypeExams',{type:"_type"})}}',type);  	

});


function loadproto(url,type){
	var url2=url.replace("_type", type);
	$("#listeproto").html("<center><div class=\"spinner-border\" role=\"status\"><span class=\"sr-only\">Loading...</span></div></center>");
	$('#listeproto').load(url2);
	
}



function chooseProtoAndClose(){
	var protocole = $('#listeprotocoles').children("option:selected").text();
	$('#protocole').attr('value',protocole);
	$('#listeprotooptim').modal('hide');
	
}
</script>